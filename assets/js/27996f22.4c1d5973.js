"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[8444],{4575:(t,e,s)=>{s.r(e),s.d(e,{default:()=>E});var i=s(6540),o=s(1410),n=s(5556),a=s.n(n);const r=t=>t*(Math.PI/180),h=(t,e,s)=>{const i=t=>Math.cos(r(t)),o=t=>Math.sin(r(t)),n=e[0],a=e[1],h=e[2],c=s;return[t[0]*(i(c)+n*n*(1-i(c)))+t[1]*(n*a*(1-i(c))-h*o(c))+t[2]*(n*h*(1-i(c))+a*o(c)),t[0]*(a*n*(1-i(c))+h*o(c))+t[1]*(i(c)+a*a*(1-i(c)))+t[2]*(a*h*(1-i(c))-n*o(c)),t[0]*(h*n*(1-i(c))-a*o(c))+t[1]*(h*a*(1-i(c))+n*o(c))+t[2]*(i(c)+h*h*(1-i(c)))]},c=(t,e,s,i)=>{const o=t=>Math.cos(r(t)),n=t=>Math.sin(r(t)),a=e[0],h=e[1],c=e[2],l=s[0],u=s[1],d=s[2],p=o(t/2)*o(i/2)-n(t/2)*n(i/2)*(a*l+h*u+c*d),f=2*(Math.acos(Math.abs(p)>1?p/Math.abs(p):p)*(180/Math.PI));const m=(n(t/2)*o(i/2)*a+o(t/2)*n(i/2)*l+n(t/2)*n(i/2)*(h*d-c*u))/n(f/2),b=(n(t/2)*o(i/2)*h+o(t/2)*n(i/2)*u+n(t/2)*n(i/2)*(c*l-a*d))/n(f/2),g=(n(t/2)*o(i/2)*c+o(t/2)*n(i/2)*d+n(t/2)*n(i/2)*(a*u-h*l))/n(f/2);return{gama:f,rotationVector:[isNaN(m)||!isFinite(m)?1:m,isNaN(b)||!isFinite(m)?1:b,isNaN(g)||!isFinite(m)?1:g]}},l=(t,e,s,i)=>{const o=e[0]+s-t[0],n=e[1]+i-t[1];return Math.sqrt(o*o+n*n)},u=t=>t.targetTouches?{clientX:t.targetTouches[0].clientX,clientY:t.targetTouches[0].clientY}:{clientX:t.clientX,clientY:t.clientY};var d=s(4848);const p=50,f=["front","back","top","bottom","left","right"],m={left:[-50,0,0],right:[p,0,0],front:[0,0,p],back:[0,0,-50],top:[0,-50,0],bottom:[0,p,0]};class b extends i.Component{static propTypes=(()=>({faceRotationInit:a().func,translate:a().array,orientation:a().array}))();constructor(t){super(t),this.onTouchStart=this.onTouchStart.bind(this);let e={};e.top=-50===this.props.translate[1]?"#fff":"",e.bottom=this.props.translate[1]===p?"#FDCC09":"",e.left=-50===this.props.translate[0]?"#DC422F":"",e.right=this.props.translate[0]===p?"#FF6C00":"",e.front=this.props.translate[2]===p?"#009D54":"",e.back=-50===this.props.translate[2]?"#3D81F6":"",Math.abs(this.props.translate[0])+Math.abs(this.props.translate[1])+Math.abs(this.props.translate[2])===p&&(this.disableFaceRotation=!0),this.state={touchStarted:!1,faceColors:e}}componentDidMount(){this.elem.addEventListener("mouseup",this.onTouchEnd),this.elem.addEventListener("touchend",this.onTouchEnd),this.elem.addEventListener("touchcancel",this.onTouchEnd)}componentWillUnmount(){this.elem.removeEventListener("mouseup",this.onTouchEnd),this.elem.removeEventListener("touchend",this.onTouchEnd),this.elem.removeEventListener("touchcancel",this.onTouchEnd)}cubePosition(){return this.props.translate?{transform:`translate3d(${this.props.translate[0]}px,${this.props.translate[1]}px,${this.props.translate[2]}px)\n         rotate3d(${this.props.orientation[0]},${this.props.orientation[1]},${this.props.orientation[2]},${this.props.orientation[3]}deg)`}:{}}onTouchStart(t,e,s){if(this.disableFaceRotation)return!0;t.stopPropagation(),this.props.faceRotationInit({x:u(t).clientX,y:u(t).clientY},e)}render(){return(0,d.jsx)("div",{ref:t=>this.elem=t,className:"cube",style:this.cubePosition(),children:f.map(((t,e)=>(0,d.jsx)("div",{onMouseDown:e=>this.onTouchStart(e,t),onTouchStart:e=>this.onTouchStart(e,t),className:"face "+t,style:{backgroundColor:this.state.faceColors[t]}},e)))})}}const g=b;class v extends i.Component{constructor(t){super(t),this.getOrientation=this.getOrientation.bind(this),this.state={positions:[[0,0,0],[-50,0,0],[p,0,0],[0,-50,0],[0,p,0],[-50,-50,0],[-50,p,0],[p,-50,0],[p,p,0],[0,0,-50],[-50,0,-50],[p,0,-50],[0,-50,-50],[0,p,-50],[-50,-50,-50],[-50,p,-50],[p,-50,-50],[p,p,-50],[0,0,p],[-50,0,p],[p,0,p],[0,-50,p],[0,p,p],[-50,-50,p],[-50,p,p],[p,-50,p],[p,p,p]],angleOfRotation:Array(27).fill(0),rotationVector:Array(27).fill([1,0,0]),faceRotationAngle:0,scalingFactor:1},this.onTouchStart=this.onTouchStart.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.rotateCube=this.rotateCube.bind(this),this.reArrangeCubes=this.reArrangeCubes.bind(this),this.rotateCubeSpace=this.rotateCubeSpace.bind(this),this.faceRotationInit=this.faceRotationInit.bind(this),this.updateScalingFactor=this.updateScalingFactor.bind(this)}componentDidMount(){this.updateScalingFactor(),window.addEventListener("resize",this.updateScalingFactor),this.elem.addEventListener("mouseup",this.onTouchEnd),this.elem.addEventListener("touchend",this.onTouchEnd),this.elem.addEventListener("touchcancel",this.onTouchEnd),this.rotateCubeSpace(120,0)}componentWillUnmount(){window.removeEventListener("resize",this.updateScalingFactor),this.elem.removeEventListener("mouseup",this.onTouchEnd),this.elem.removeEventListener("touchend",this.onTouchEnd),this.elem.removeEventListener("touchcancel",this.onTouchEnd)}updateScalingFactor(){const t=Math.min(window.innerWidth,window.innerHeight),e=Math.min(Math.max(t/300,1),1.5);this.setState({scalingFactor:e})}getOrientation(t){return[this.state.rotationVector[t][0],this.state.rotationVector[t][1],this.state.rotationVector[t][2],this.state.angleOfRotation[t]]}onTouchStart(t){this.setState({touchStarted:!0,mousePoint:{x:u(t).clientX,y:u(t).clientY}})}rotateCubeSpace(t,e){let s=this.state.positions.slice(),i=[],o=[];for(let n=0;n<s.length;n++){s[n]=Math.abs(e)>Math.abs(t)?h(this.state.positions[n],[1,0,0],-e):h(this.state.positions[n],[0,1,0],t);let a=Math.abs(e)>Math.abs(t)?c(-e,[1,0,0],this.state.rotationVector[n],this.state.angleOfRotation[n]):c(t,[0,1,0],this.state.rotationVector[n],this.state.angleOfRotation[n]);i[n]=a.gama,o[n]=a.rotationVector}this.setState({positions:s,angleOfRotation:i,rotationVector:o})}onTouchMove(t){if(this.state.touchStarted){let e=u(t).clientY-this.state.mousePoint.y,s=u(t).clientX-this.state.mousePoint.x;this.setState({mousePoint:{x:u(t).clientX,y:u(t).clientY}},(()=>{this.rotateCubeSpace(s,e)}))}else if(this.state.touchedFace){let e=u(t).clientY-this.state.mousePoint.y,s=u(t).clientX-this.state.mousePoint.x;this.setState({mousePoint:{x:u(t).clientX,y:u(t).clientY}}),this.rotateCube(s/2,e/2,this.state.positions[this.state.facePositionIndex],this.state.touchedFace,this.getOrientation(this.state.facePositionIndex))}}onTouchEnd(){this.setState({touchStarted:!1,mousePoint:{},touchedFace:void 0}),this.state.faceRotationIndex&&this.reArrangeCubes()}reArrangeCubes(){if(this.state.faceRotationAngle%90==0)return void this.setState({faceRotationAngle:0,faceRotationIndex:null,autoRotation:void 0});const t=Math.abs(this.state.faceRotationAngle%90)<80&&Math.abs(this.state.faceRotationAngle%90)>10?3:1;this.setState({autoRotation:!0,currentMove:t,reverseAngle:!this.state.autoRotation&&Math.abs(this.state.faceRotationAngle%90)<30?!this.state.reverseAngle:this.state.reverseAngle},(()=>{this.rotateCube(Math.sqrt(.5),Math.sqrt(.5),null),setTimeout(this.reArrangeCubes,.001)}))}rotateCube(t,e,s,i,o){if(this.state.autoRotation&&i)return;if(0===t&&0===e)return;const n=i?Math.round(Math.sqrt(t*t+e*e)):this.state.currentMove;let a=this.state.rotationVector.slice(),r=this.state.angleOfRotation,u=this.state.positions.slice();const d=[[0,0,1],[0,0,-1],[0,1,0],[0,-1,0],[1,0,0],[-1,0,0]];d.forEach(((t,e)=>{d[e]=h(t,a[0],r[0])}));let f=0,b=!1;if(i){let a,r=1e3;if(this.state.faceRotationAngle)f=this.state.faceRotationIndex,a=h(s.slice(),d[f].slice(),n),r>l(a,s,t,e)&&(r=l(a,s,t,e),b=!1),a=h(s.slice(),d[f].slice(),-n),r>l(a,s,t,e)&&(r=l(a,s,t,e),b=!0);else{let c=[];c=h(m[i],[o[0],o[1],o[2]],o[3]);for(let i in d)Math.abs(s[0]*d[i][0]+s[1]*d[i][1]+s[2]*d[i][2]-p)<.1&&Math.abs(c[0]*d[i][0]+c[1]*d[i][1]+c[2]*d[i][2]-p)>.1&&(a=h(s.slice(),d[i].slice(),n),r>l(a,s,t,e)&&(r=l(a,s,t,e),f=i,b=!1),a=h(s.slice(),d[i].slice(),-n),r>l(a,s,t,e)&&(r=l(a,s,t,e),f=i,b=!0))}this.setState({faceRotationIndex:f,reverseAngle:b})}else b=this.state.reverseAngle,f=this.state.faceRotationIndex;for(let l=0;l<u.length;l++){let t=u[l][0]*d[f][0],e=u[l][1]*d[f][1],s=u[l][2]*d[f][2];if(Math.abs(t+e+s-p)<.1){u[l]=h(this.state.positions[l],d[f],b?-n:n);const t=c(b?-n:n,d[f],a[l].slice(),r[l]);a[l]=t.rotationVector,r[l]=t.gama}}this.setState({positions:u,angleOfRotation:r,rotationVector:a,faceRotationAngle:this.state.faceRotationAngle+(b?-n:n)})}faceRotationInit(t,e,s){this.setState({touchedFace:e,mousePoint:t,facePositionIndex:s})}render(){return(0,d.jsx)("div",{ref:t=>this.elem=t,className:"cube-container",style:{transform:`scale(${this.state.scalingFactor})`},onMouseDown:this.onTouchStart,onTouchStart:this.onTouchStart,onMouseMove:this.onTouchMove,onTouchMove:this.onTouchMove,children:this.state.positions.map(((t,e)=>(0,d.jsx)(g,{faceRotationInit:(t,s)=>{this.faceRotationInit(t,s,e)},translate:this.state.positions[e],orientation:this.getOrientation(e)},e)))})}}const M=v;var S=s(9136);function T(t){let{children:e,fallback:s}=t;return(0,S.A)()?(0,d.jsx)(d.Fragment,{children:e?.()}):s??null}class R extends i.Component{render(){return(0,d.jsx)(T,{children:()=>(0,d.jsx)(M,{})})}}const x=R;function E(){return(0,d.jsx)(o.A,{title:"RubixCube",description:"Pantalla interactiva del Cubo de Rubik",children:(0,d.jsxs)("main",{children:[(0,d.jsx)(x,{})," "]})})}}}]);